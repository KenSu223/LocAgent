{
  "issue_url": "https://github.com/huggingface/transformers/issues/16497",
  "repo_name": "transformers",
  "title": "[TODO] Investigate equivalence tests",
  "base_commit": "e4b234834a79541f31be227aadce13f5aafda85a",
  "ground_truth_files": [
    "templates/adding_a_new_model/cookiecutter-template-{{cookiecutter.modelname}}/test_modeling_tf_{{cookiecutter.lowercase_modelname}}.py",
    "tests/albert/test_modeling_tf_albert.py",
    "tests/bert/test_modeling_tf_bert.py",
    "tests/clip/test_modeling_tf_clip.py",
    "tests/convbert/test_modeling_tf_convbert.py",
    "tests/ctrl/test_modeling_tf_ctrl.py",
    "tests/deberta/test_modeling_tf_deberta.py",
    "tests/deberta_v2/test_modeling_tf_deberta_v2.py",
    "tests/distilbert/test_modeling_tf_distilbert.py",
    "tests/dpr/test_modeling_tf_dpr.py",
    "tests/electra/test_modeling_tf_electra.py",
    "tests/flaubert/test_modeling_tf_flaubert.py",
    "tests/funnel/test_modeling_tf_funnel.py",
    "tests/gpt2/test_modeling_tf_gpt2.py",
    "tests/gptj/test_modeling_tf_gptj.py",
    "tests/layoutlm/test_modeling_tf_layoutlm.py",
    "tests/longformer/test_modeling_tf_longformer.py",
    "tests/lxmert/test_modeling_tf_lxmert.py",
    "tests/mobilebert/test_modeling_tf_mobilebert.py",
    "tests/mpnet/test_modeling_tf_mpnet.py",
    "tests/openai/test_modeling_tf_openai.py",
    "tests/rembert/test_modeling_tf_rembert.py",
    "tests/roberta/test_modeling_tf_roberta.py",
    "tests/roformer/test_modeling_tf_roformer.py",
    "tests/t5/test_modeling_tf_t5.py",
    "tests/tapas/test_modeling_tf_tapas.py",
    "tests/test_modeling_tf_common.py",
    "tests/xlm/test_modeling_tf_xlm.py",
    "tests/xlnet/test_modeling_tf_xlnet.py"
  ],
  "predicted_files": [
    "tests/speech_encoder_decoder/test_modeling_flax_speech_encoder_decoder.py",
    "tests/test_modeling_tf_common.py",
    "tests/encoder_decoder/test_modeling_tf_encoder_decoder.py",
    "tests/wav2vec2/test_modeling_flax_wav2vec2.py",
    "tests/vit_mae/test_modeling_tf_vit_mae.py"
  ],
  "success": true,
  "raw_output": "{'files_to_modify': ['tests/encoder_decoder/test_modeling_tf_encoder_decoder.py', 'tests/wav2vec2/test_modeling_flax_wav2vec2.py', 'tests/vit_mae/test_modeling_tf_vit_mae.py', 'tests/test_modeling_tf_common.py', 'tests/speech_encoder_decoder/test_modeling_flax_speech_encoder_decoder.py'], 'reasoning': '1. tests/encoder_decoder/test_modeling_tf_encoder_decoder.py: Hosts TFGPT2EncoderDecoderModelTest and likely related tests for TFBERTEncoderDecoderModelTest. These are central to the equivalence/tolerance failures described in the issue.\\n2. tests/wav2vec2/test_modeling_flax_wav2vec2.py: Contains FlaxWav2Vec2ModelTest; modifying this allows investigation and tolerance adjustment for this model.\\n3. tests/vit_mae/test_modeling_tf_vit_mae.py: Contains TFViTMAEModelTest and also references specific tolerance settings (and their TODOs). Directly related to issue failures for ViTMAE equivalence.\\n4. tests/test_modeling_tf_common.py: Implements shared equivalence/tolerance helpers and test logic, including model equivalence functions for PT/TF. Changes here will propagate stricter/flexible tolerance settings across many tests.\\n5. tests/speech_encoder_decoder/test_modeling_flax_speech_encoder_decoder.py: Imports FlaxWav2Vec2ModelTester and is involved in encoder-decoder Flax speech model equivalence testing.\\nFiles are listed in order of importance, prioritizing test classes named directly in the issue, followed by shared/common code for broad impact.'}",
  "error": null
}